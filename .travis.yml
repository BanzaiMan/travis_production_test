language: php

sudo: false

dist: precise

# cache: bundler

jobs:
  include:
    - stage: first
      env: MAKE_RELEASE=true
    - env: DOCTOCCHECK=true
    - env: SHELLCHECK=true
    - env: SHELL=bash TEST_SUITE=install_script

    - stage: second
      env: SHELL=sh TEST_SUITE=fast
    - env: SHELL=dash TEST_SUITE=fast
    - env: SHELL=bash TEST_SUITE=fast
    - env: SHELL=zsh TEST_SUITE=fast
  #  - env: SHELL=ksh TEST_SUITE=fast
    - env: SHELL=sh TEST_SUITE=sourcing
    - env: SHELL=dash TEST_SUITE=sourcing
    - env: SHELL=bash TEST_SUITE=sourcing
    - env: SHELL=zsh TEST_SUITE=sourcing
  #  - env: SHELL=ksh TEST_SUITE=sourcing

    - stage: third
      env: SHELL=sh TEST_SUITE=slow
    - env: SHELL=dash TEST_SUITE=slow
    - env: SHELL=bash TEST_SUITE=slow
    - env: SHELL=zsh TEST_SUITE=slow
  #  - env:  SHELL=ksh TEST_SUITE=slow
    - env: SHELL=sh TEST_SUITE=installation_node
    - env: SHELL=sh TEST_SUITE=installation_node WITHOUT_CURL=1
    - env: SHELL=dash TEST_SUITE=installation_node
    - env: SHELL=dash TEST_SUITE=installation_node WITHOUT_CURL=1
    - env: SHELL=bash TEST_SUITE=installation_node
    - env: SHELL=bash TEST_SUITE=installation_node WITHOUT_CURL=1
    - env: SHELL=zsh TEST_SUITE=installation_node
    - env: SHELL=zsh TEST_SUITE=installation_node WITHOUT_CURL=1
  #  - env:  SHELL=ksh TEST_SUITE=installation_node
  #  - env:  SHELL=ksh TEST_SUITE=installation_node WITHOUT_CURL=1
    - env: SHELL=sh TEST_SUITE=installation_iojs
    - env: SHELL=sh TEST_SUITE=installation_iojs WITHOUT_CURL=1
    - env: SHELL=dash TEST_SUITE=installation_iojs
    - env: SHELL=dash TEST_SUITE=installation_iojs WITHOUT_CURL=1
    - env: SHELL=bash TEST_SUITE=installation_iojs
    - env: SHELL=bash TEST_SUITE=installation_iojs WITHOUT_CURL=1
    - env: SHELL=zsh TEST_SUITE=installation_iojs
    - env: SHELL=zsh TEST_SUITE=installation_iojs WITHOUT_CURL=1
  #  - env:  SHELL=ksh TEST_SUITE=installation_iojs
  #  - env:  SHELL=ksh TEST_SUITE=installation_iojs WITHOUT_CURL=1env:
install:
  - true

script: skip

notifications:
  email: false
  # webhooks: http://requestb.in/16le4he1

  #  slack:
  #  rooms:
  #    - secure: "KZTfjxhkOdDDZYD2ThBILt2ShYtdEee3PudFZlQBfpxG9N470GfxnKVfOl7Odu4lN6cIupwC4S4BnehubEywSR99l60VmfhePUCTqDLYy+iR9+guTvaECdXdaau3jTKhFdu5u60ITsiw5Yb+hwAaGFO0HmQhqR9XVr/U8IGQlok="
  #  template:
  #    - "Build <%{build_url}|#%{build_number}> (<%{compare_url}|%{commit}>) of %{repository}@%{branch} by %{author} %{result} in %{duration} (elapsed time: %{elapsed_time}) subject: %{commit_subject} message: %{commit_message} foobar"
  #  on_success: always
