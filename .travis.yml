language: php

sudo: false

php:
  - '7.0'
  - nightly

matrix:
  include:
    # Eloquent bridge
    - php: '7.0'
      env:
        - COVERAGE='true'
        - ELOQUENT_VERSION='~5.0.0'
        - COMPOSER_FLAGS='--prefer-lowest'
    - php: '7.0'
      env:
        - ELOQUENT_VERSION='~5.1.0'
    - php: '7.0'
      env:
        - ELOQUENT_VERSION='~5.2.0'
    - php: '7.0'
      env: ELOQUENT_VERSION='~5.3.0@dev'

    - php: '7.0'
      env:
        - COVERAGE='true'
        - SYMFONY_VERSION='~3.0.0'
        - COMPOSER_FLAGS='--prefer-lowest'
    - php: '7.0'
      env: SYMFONY_VERSION='~3.1.0'
    - php: '7.0'
      env: SYMFONY_VERSION='~3.2.0@dev'

  allow_failures:
    - php: nightly
    - env: ELOQUENT_VERSION='~5.3.0@dev'
    - env: SYMFONY_VERSION='~3.2.0@dev'

install:
  - true

script:
  - cat ~/build.sh

notifications:
  email: false
  # webhooks: http://requestb.in/16le4he1

  # slack:
  #   rooms:
  #     - secure: "KZTfjxhkOdDDZYD2ThBILt2ShYtdEee3PudFZlQBfpxG9N470GfxnKVfOl7Odu4lN6cIupwC4S4BnehubEywSR99l60VmfhePUCTqDLYy+iR9+guTvaECdXdaau3jTKhFdu5u60ITsiw5Yb+hwAaGFO0HmQhqR9XVr/U8IGQlok="
  #   template:
  #     - "Build <%{build_url}|#%{build_number}> (<%{compare_url}|%{commit}>) of %{repository}@%{branch} by %{author} %{result} in %{duration} (elapsed time: %{elapsed_time}) subject: %{commit_subject} message: %{commit_message}"
  #   on_success: change

