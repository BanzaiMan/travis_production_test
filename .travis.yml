language: ruby

sudo: false

env:
  - SCRIPT=SCRIPT1
  - SCRIPT=SCRIPT2
  - SCRIPT=SCRIPT3

install:
  - true

script: |
  case $TRAVIS_EVENT_TYPE in
    'push' )
      SCRIPT1=build_all_apps
      SCRIPT2=run_smoke_tests
      SCRIPT3=lint
      ;;
    'cron' )
      SCRIPT1='ops/build_and_test_otp_release admin'
      SCRIPT2='ops/build_and_test_otp_release api'
      SCRIPT3='ops/build_and_test_otp_release shard_builder_cli'
      ;;
  esac
  eval "echo \$$SCRIPT"

notifications:
  email: false

  # slack:
  #   rooms:
  #     - secure: "KZTfjxhkOdDDZYD2ThBILt2ShYtdEee3PudFZlQBfpxG9N470GfxnKVfOl7Odu4lN6cIupwC4S4BnehubEywSR99l60VmfhePUCTqDLYy+iR9+guTvaECdXdaau3jTKhFdu5u60ITsiw5Yb+hwAaGFO0HmQhqR9XVr/U8IGQlok="
  #   template:
  #     - "Build <%{build_url}|#%{build_number}> (<%{compare_url}|%{commit}>) of %{repository}@%{branch} by %{author} %{result} in %{duration} (elapsed time: %{elapsed_time}) subject: %{commit_subject} message: %{commit_message}"
